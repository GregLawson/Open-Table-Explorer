<h1>Listing transfers</h1>

<table border=1>
  <tr>
    <th>Account_id</th>
    <th>Account</th>
    <th>Amount</th>
    <th>Posted</th>
  </tr>
<% for transfer in @transfers %>
  <tr>
    <td><%=h transfer.account_id %></td>
    <% if transfer.account.nil? then %>
	<td></td>
      <% else %>
	<td><%=h transfer.account.name %></td>
     <% end %>
   <td><%=h number_to_currency(transfer.amount) %></td>
    <td><%=h transfer.posted %></td>
    <td><%= link_to 'Show', transfer %></td>
    <td><%= link_to 'Edit', edit_transfer_path(transfer) %></td>
    <td><%= link_to 'Destroy', transfer, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New transfer', new_transfer_path %>
<p>
< %=  Transfer.to_sql  %>
< %=  Transfer.arel.to_sql  %>
</p>
< %=  Transfer.arel.includes(:account).account.to_sql  %>
< %=  Transfer.arel.includes(:account).account.open_tax_solver_line.to_sql  %>
< %=  Transfer.arel.includes(:account).where("accounts.open_tax_solver_line is not null").to_sql  %>
< %=  Transfer.open_tax_solver %>
</p>
